<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MR_TOOLS ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ - ‡¶ó‡¶° ‡¶Æ‡ßã‡¶°</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif;}
body {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    min-height:100vh;
    padding:20px;
}

/* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.header {
    text-align:center;
    margin-bottom:30px;
    color:white;
    position: relative;
    padding: 20px;
    background: rgba(0,0,0,0.7);
    border-radius: 20px;
    border: 2px solid rgba(255,102,178,0.3);
}

.header h1 {
    font-size:42px;
    margin-bottom:10px;
    background: linear-gradient(90deg, #ff66b2, #cc33ff, #66b2ff, #33ccff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.header p {
    color:#aaa;
    font-size:18px;
}

/* ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¨‡¶æ‡¶∞ */
.status-bar {
    display:flex;
    justify-content:space-between;
    background: rgba(0,0,0,0.8);
    color:white;
    padding:15px;
    border-radius:15px;
    margin-bottom:25px;
    font-size:16px;
    border: 1px solid rgba(255,102,178,0.3);
}

.status-item {
    display:flex;
    align-items:center;
    gap:8px;
    padding: 8px 15px;
    background: rgba(255,102,178,0.1);
    border-radius: 10px;
    transition: all 0.3s ease;
}

.status-item:hover {
    background: rgba(255,102,178,0.2);
    transform: translateY(-2px);
}

/* ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ó‡ßç‡¶∞‡¶ø‡¶° */
.users-grid {
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));
    gap:20px;
    margin-bottom:40px;
}

.user-card {
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
    border-radius:20px;
    padding:20px;
    box-shadow:0 10px 25px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    border: 1px solid rgba(255,255,255,0.3);
    position: relative;
    overflow: hidden;
}

.user-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255,102,178,0.1), rgba(204,51,255,0.1));
    border-radius: 20px;
    z-index: -1;
}

.user-card:hover {
    transform: translateY(-5px);
    box-shadow:0 15px 35px rgba(255,102,178,0.3);
    border-color: rgba(255,102,178,0.5);
}

.user-id {
    font-size:20px;
    font-weight:bold;
    color:#333;
    margin-bottom:15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.user-id span {
    background:linear-gradient(135deg, #667eea, #764ba2);
    padding:6px 15px;
    border-radius:10px;
    color:white;
    font-size:16px;
}

.controls-btn {
    background:#ff66b2;
    color:white;
    border:none;
    border-radius:8px;
    padding:8px 16px;
    cursor:pointer;
    font-weight:600;
    transition:all 0.3s ease;
    display:flex;
    align-items:center;
    gap:6px;
    font-size:14px;
}

.controls-btn:hover {
    background:#cc33ff;
    transform: translateY(-2px);
}

.user-stats {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
    margin-top:15px;
}

.stat {
    background:rgba(255,255,255,0.7);
    padding:12px;
    border-radius:10px;
    text-align:center;
    font-size:14px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    border: 1px solid rgba(255,102,178,0.2);
}

.stat:hover {
    transform: translateY(-3px);
}

.stat-value {
    font-weight:bold;
    color:#ff66b2;
    font-size:18px;
    margin-top:5px;
}

.user-status {
    margin-top:12px;
    padding:10px;
    border-radius:10px;
    text-align:center;
    font-weight:bold;
    font-size:14px;
    transition: all 0.3s ease;
}

.status-active {
    background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
    color: #2e7d32;
    border: 2px solid #4caf50;
}

.status-blocked {
    background: linear-gradient(135deg, #ffebee, #ffcdd2);
    color: #c62828;
    border: 2px solid #f44336;
}

.status-vip {
    background: linear-gradient(135deg, #fff3e0, #ffe0b2);
    color: #ef6c00;
    border: 2px solid #ff9800;
}

.status-time-blocked {
    background: linear-gradient(135deg, #fff3e0, #ffe0b2);
    color: #ff9800;
    border: 2px solid #ffb300;
}

/* ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∞‡ßÅ‡¶Æ */
.control-room {
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.95);
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:1000;
    padding:20px;
}

.control-content {
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
    border-radius:25px;
    width:100%;
    max-width:1000px;
    max-height:95vh;
    overflow-y:auto;
    box-shadow:0 20px 50px rgba(255,102,178,0.5);
    position:relative;
    border: 2px solid rgba(255,102,178,0.5);
}

.control-header {
    background:linear-gradient(135deg, #667eea, #764ba2);
    color:white;
    padding:20px;
    border-radius:25px 25px 0 0;
    display:flex;
    justify-content:space-between;
    align-items:center;
    position: sticky;
    top: 0;
    z-index: 10;
}

.control-header h2 {
    font-size:24px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.close-btn {
    background:rgba(255,255,255,0.2);
    color:white;
    border:none;
    border-radius:50%;
    width:40px;
    height:40px;
    font-size:20px;
    cursor:pointer;
    display:flex;
    justify-content:center;
    align-items:center;
    transition:0.3s;
}

.close-btn:hover {
    background:rgba(255,255,255,0.3);
    transform: rotate(90deg);
}

.control-body {
    padding:25px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.control-section {
    margin-bottom:20px;
    padding:20px;
    border-radius:15px;
    background:rgba(255,255,255,0.7);
    border:1px solid rgba(255,102,178,0.3);
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
}

.control-section:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(255,102,178,0.2);
}

.control-section h3 {
    color:#333;
    margin-bottom:15px;
    font-size:18px;
    display:flex;
    align-items:center;
    gap:10px;
    border-bottom: 2px solid rgba(255,102,178,0.3);
    padding-bottom: 8px;
}

.control-actions {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
}

.control-btn {
    padding:12px;
    border:none;
    border-radius:10px;
    font-weight:600;
    cursor:pointer;
    transition:all 0.3s ease;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:8px;
    font-size:14px;
}

.btn-block {
    background:#ff5252;
    color:white;
}
.btn-block:hover {
    background:#d32f2f;
    transform: translateY(-2px);
}
.btn-unblock {
    background:#4caf50;
    color:white;
}
.btn-unblock:hover {
    background:#388e3c;
    transform: translateY(-2px);
}
.btn-vip {
    background:#ff9800;
    color:white;
}
.btn-vip:hover {
    background:#f57c00;
    transform: translateY(-2px);
}
.btn-normal {
    background:#9e9e9e;
    color:white;
}
.btn-normal:hover {
    background:#757575;
    transform: translateY(-2px);
}

/* ‡¶´‡¶∞‡ßç‡¶Æ ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü */
.form-group {
    margin-bottom:15px;
}
.form-group label {
    display:block;
    margin-bottom:6px;
    font-weight:600;
    color:#555;
    font-size:14px;
}
.form-control {
    width:100%;
    padding:12px 15px;
    border-radius:10px;
    border:1px solid #ddd;
    font-size:14px;
    transition: all 0.3s ease;
    background: rgba(255,255,255,0.8);
}
.form-control:focus {
    border-color: #ff66b2;
    box-shadow: 0 0 10px rgba(255,102,178,0.3);
    transform: scale(1.02);
}
textarea.form-control {
    min-height:100px;
    resize:vertical;
}
.service-controls {
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));
    gap:12px;
}
.service-item {
    display:flex;
    align-items:center;
    gap:10px;
    padding:10px;
    background:white;
    border-radius:8px;
    border:1px solid #ddd;
    font-size:14px;
    transition: all 0.3s ease;
}
.service-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 12px rgba(255,102,178,0.2);
}
.service-item input[type="checkbox"] {
    width:18px;
    height:18px;
    accent-color: #ff66b2;
}

/* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü */
.alert {
    padding:15px;
    border-radius:10px;
    margin-bottom:20px;
    font-weight:600;
    font-size:14px;
}
.alert-success {
    background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
    color: #2e7d32;
    border:2px solid #4caf50;
}
.alert-error {
    background: linear-gradient(135deg, #ffebee, #ffcdd2);
    color: #c62828;
    border:2px solid #f44336;
}

/* ‡¶≤‡ßã‡¶°‡¶æ‡¶∞ */
.loader {
    text-align:center;
    padding:20px;
    color:#666;
    font-size:16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 5px solid rgba(255,102,178,0.3);
    border-top: 5px solid #ff66b2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡¶æ‡¶∞ */
.search-container {
    margin-bottom:25px;
    position: relative;
}
.search-box {
    width:100%;
    padding:15px 20px;
    border-radius:15px;
    border:2px solid rgba(255,102,178,0.3);
    font-size:16px;
    background: rgba(255,255,255,0.9);
    transition: all 0.3s ease;
}
.search-box:focus {
    border-color: #ff66b2;
    box-shadow: 0 5px 20px rgba(255,102,178,0.4);
    transform: translateY(-2px);
}

/* ‡¶ï‡ßã‡¶Ø‡¶º‡¶ø‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® */
.quick-actions {
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
    gap:15px;
    margin-bottom:25px;
}
.quick-action-btn {
    padding:15px;
    border:none;
    border-radius:15px;
    font-weight:600;
    cursor:pointer;
    transition:all 0.3s ease;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:10px;
    font-size:16px;
    background: linear-gradient(135deg, #ff66b2, #cc33ff);
    color:white;
}
.quick-action-btn:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(204,51,255,0.6);
}

/* ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶á‡¶®‡¶´‡ßã ‡¶ï‡¶æ‡¶∞‡ßç‡¶° */
.user-info-card {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    grid-column: 1 / -1;
}
.user-info-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    font-size: 16px;
}
.user-info-label {
    font-weight: 600;
}
.user-info-value {
    font-weight: normal;
}

/* ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶¨‡¶æ‡¶∞ */
.progress-container {
    background: rgba(255,255,255,0.3);
    border-radius: 10px;
    margin: 12px 0;
    height: 12px;
    overflow: hidden;
}
.progress-bar {
    height: 100%;
    border-radius: 10px;
    background: linear-gradient(90deg, #ff66b2, #cc33ff);
    transition: width 0.5s ease;
}

/* ‡¶∞‡ßá‡¶∏‡ßç‡¶™‡¶®‡ßç‡¶∏‡¶ø‡¶≠ */
@media (max-width: 1200px) {
    .control-body {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .users-grid {
        grid-template-columns:1fr;
    }
    .control-actions {
        grid-template-columns:1fr;
    }
    .status-bar {
        flex-direction:column;
        gap:12px;
    }
    .quick-actions {
        grid-template-columns:1fr;
    }
    .service-controls {
        grid-template-columns: 1fr 1fr;
    }
}

/* ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.dashboard-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: rgba(255,255,255,0.9);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    border: 1px solid rgba(255,102,178,0.3);
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(255,102,178,0.3);
}

.stat-icon {
    font-size: 40px;
    margin-bottom: 10px;
}

.stat-number {
    font-size: 32px;
    font-weight: bold;
    color: #ff66b2;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 14px;
    color: #666;
}

/* ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ */
.tabs {
    display: flex;
    margin-bottom: 20px;
    background: rgba(255,255,255,0.1);
    border-radius: 15px;
    padding: 5px;
}

.tab {
    flex: 1;
    padding: 12px;
    text-align: center;
    background: transparent;
    border: none;
    color: white;
    font-weight: 600;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.tab.active {
    background: rgba(255,102,178,0.8);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

/* ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶¨‡¶æ‡¶∞ */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #ff66b2, #cc33ff);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #cc33ff, #ff66b2);
}
</style>
</head>
<body>

<div class="header">
    <h1><i class="fas fa-crown"></i> MR_TOOLS ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ - ‡¶ó‡¶° ‡¶Æ‡ßã‡¶°</h1>
    <p>‡¶∏‡¶ï‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</p>
</div>

<div class="dashboard-stats">
    <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-number" id="totalUsers">0</div>
        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-number" id="activeUsers">0</div>
        <div class="stat-label">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">‚ùå</div>
        <div class="stat-number" id="blockedUsers">0</div>
        <div class="stat-label">‡¶¨‡ßç‡¶≤‡¶ï‡¶° ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">‚≠ê</div>
        <div class="stat-number" id="vipUsers">0</div>
        <div class="stat-label">‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-number" id="totalOrders">0</div>
        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">üîÑ</div>
        <div class="stat-number" id="todayOrders">0</div>
        <div class="stat-label">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞</div>
    </div>
</div>

<div class="tabs">
    <button class="tab active" data-tab="users-tab">üë• ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</button>
    <button class="tab" data-tab="system-tab">‚öôÔ∏è ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</button>
</div>

<div class="tab-content active" id="users-tab">
    <div class="search-container">
        <input type="text" class="search-box" id="searchBox" placeholder="üîç ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßÅ‡¶®...">
    </div>

    <div class="quick-actions">
        <button class="quick-action-btn" id="bulkMessageBtn">
            <i class="fas fa-broadcast-tower"></i> ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
        </button>
        <button class="quick-action-btn" id="enableMaintenanceBtn">
            <i class="fas fa-tools"></i> ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
        </button>
        <button class="quick-action-btn" id="disableMaintenanceBtn">
            <i class="fas fa-check-circle"></i> ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
        </button>
    </div>

    <div id="alertContainer"></div>

    <div class="users-grid" id="usersGrid">
        <div class="loader">
            <div class="spinner"></div>
            <div>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
        </div>
    </div>
</div>

<div class="tab-content" id="system-tab">
    <div class="control-section">
        <h3><i class="fas fa-sliders-h"></i> ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
        <div class="form-group">
            <label for="systemCooldown">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶∏‡¶Æ‡¶Ø‡¶º (‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü):</label>
            <input type="number" id="systemCooldown" class="form-control" min="1" max="60" value="10">
        </div>
        <button class="controls-btn" id="updateSystemSettingsBtn" style="background:#2196f3; color:white; width:100%;">
            <i class="fas fa-save"></i> ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
        </button>
    </div>

    <div class="control-section">
        <h3><i class="fas fa-database"></i> ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h3>
        <div class="control-actions">
            <button class="control-btn" id="backupDataBtn" style="background:#4caf50; color:white;">
                <i class="fas fa-download"></i> ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™
            </button>
            <button class="control-btn" id="exportDataBtn" style="background:#ff9800; color:white;">
                <i class="fas fa-file-export"></i> ‡¶°‡¶æ‡¶ü‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü
            </button>
        </div>
    </div>
</div>

<!-- ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∞‡ßÅ‡¶Æ -->
<div class="control-room" id="controlRoom" style="display:none;">
    <div class="control-content">
        <div class="control-header">
            <h2><i class="fas fa-gamepad"></i> ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∞‡ßÅ‡¶Æ - <span id="controlUserId"></span></h2>
            <button class="close-btn" id="closeControlRoom">‚úï</button>
        </div>
        <div class="control-body">
            
            <div class="user-info-card">
                <div class="user-info-row">
                    <span class="user-info-label"><i class="fas fa-id-card"></i> ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø:</span>
                    <span class="user-info-value" id="infoUserId"></span>
                </div>
                <div class="user-info-row">
                    <span class="user-info-label"><i class="fas fa-shopping-cart"></i> ‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞:</span>
                    <span class="user-info-value" id="infoTotalOrders">0</span>
                </div>
                <div class="user-info-row">
                    <span class="user-info-label"><i class="fas fa-link"></i> ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞:</span>
                    <span class="user-info-value" id="infoCurrentOrders">0/5</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="orderProgressBar" style="width: 0%"></div>
                </div>
                <div class="user-info-row">
                    <span class="user-info-label"><i class="fas fa-crown"></i> ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:</span>
                    <span class="user-info-value" id="infoVipUsage">0/0</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="vipProgressBar" style="width: 0%"></div>
                </div>
            </div>

            <div class="control-section">
                <h3><i class="fas fa-user-lock"></i> ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</h3>
                <div class="control-actions">
                    <button class="control-btn btn-block" id="blockUserBtn">
                        <i class="fas fa-ban"></i> ‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button class="control-btn btn-unblock" id="unblockUserBtn">
                        <i class="fas fa-check-circle"></i> ‡¶Ü‡¶®‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button class="control-btn btn-vip" id="makeVipBtn">
                        <i class="fas fa-crown"></i> ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡¶æ‡¶®‡¶æ‡¶®
                    </button>
                    <button class="control-btn btn-normal" id="removeVipBtn">
                        <i class="fas fa-user"></i> ‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶¨‡¶æ‡¶®‡¶æ‡¶®
                    </button>
                </div>
            </div>

            <div class="control-section">
                <h3><i class="fas fa-clock"></i> ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</h3>
                <div class="form-group">
                    <label for="timeBlockDuration">‡¶¨‡ßç‡¶≤‡¶ï ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                    <select id="timeBlockDuration" class="form-control">
                        <option value="30">‡ß©‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</option>
                        <option value="60">‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                        <option value="120">‡ß® ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                        <option value="240">‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                        <option value="720">‡ßß‡ß® ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                        <option value="1440">‡ß®‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                    </select>
                </div>
                <div class="control-actions">
                    <button class="control-btn" id="timeBlockBtn" style="background:#ff9800; color:white;">
                        <i class="fas fa-clock"></i> ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button class="control-btn" id="removeTimeBlockBtn" style="background:#4caf50; color:white;">
                        <i class="fas fa-unlock"></i> ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®
                    </button>
                </div>
            </div>

            <div class="control-section">
                <h3><i class="fas fa-crown"></i> ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</h3>
                <div class="form-group">
                    <label for="vipServiceLimit">‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü (‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ):</label>
                    <input type="number" id="vipServiceLimit" class="form-control" min="0" max="100" value="2">
                </div>
                <div class="form-group">
                    <label for="resetVipUsage">‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                    <button class="controls-btn" id="resetVipUsageBtn" style="background:#9c27b0; color:white; width:100%;">
                        <i class="fas fa-redo"></i> ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            </div>

            <div class="control-section">
                <h3><i class="fas fa-envelope"></i> ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú</h3>
                <div class="form-group">
                    <label for="adminMessage">‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:</label>
                    <textarea id="adminMessage" class="form-control" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                </div>
                <button class="controls-btn" id="sendMessageBtn" style="background:#9c27b0; color:white; width:100%;">
                    <i class="fas fa-paper-plane"></i> ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
                </button>
            </div>

            <div class="control-section">
                <h3><i class="fas fa-cogs"></i> ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</h3>
                <div class="service-controls" id="serviceControls">
                    <!-- ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá -->
                </div>
            </div>

            <div class="control-section">
                <h3><i class="fas fa-stopwatch"></i> ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
                <div class="form-group">
                    <label for="cooldownTime">‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶∏‡¶Æ‡¶Ø‡¶º (‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü):</label>
                    <input type="number" id="cooldownTime" class="form-control" min="1" max="60" value="10">
                </div>
                <button class="controls-btn" id="updateCooldownBtn" style="background:#2196f3; color:white; width:100%;">
                    <i class="fas fa-sync"></i> ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>

            <div class="control-section">
                <h3><i class="fas fa-sort-amount-up"></i> ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
                <div class="form-group">
                    <label for="likesAmount">‡¶≤‡¶æ‡¶á‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</label>
                    <input type="number" id="likesAmount" class="form-control" min="1" max="1000" value="100">
                </div>
                <div class="form-group">
                    <label for="viewsAmount">‡¶≠‡¶ø‡¶â ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</label>
                    <input type="number" id="viewsAmount" class="form-control" min="1" max="5000" value="500">
                </div>
                <div class="form-group">
                    <label for="followersAmount">‡¶´‡¶≤‡ßã‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</label>
                    <input type="number" id="followersAmount" class="form-control" min="1" max="100" value="50">
                </div>
                <div class="form-group">
                    <label for="commentsAmount">‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</label>
                    <input type="number" id="commentsAmount" class="form-control" min="10" max="100" value="50">
                </div>
                <div class="form-group">
                    <label for="sharesAmount">‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</label>
                    <input type="number" id="sharesAmount" class="form-control" min="1" max="100" value="50">
                </div>
                <button class="controls-btn" id="updateAmountsBtn" style="background:#ff9800; color:white; width:100%;">
                    <i class="fas fa-edit"></i> ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Æ‡¶°‡¶æ‡¶≤ -->
<div class="control-room" id="bulkMessageModal" style="display:none;">
    <div class="control-content" style="max-width:600px;">
        <div class="control-header">
            <h2><i class="fas fa-broadcast-tower"></i> ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú</h2>
            <button class="close-btn" id="closeBulkMessageModal">‚úï</button>
        </div>
        <div class="control-body">
            <div class="form-group">
                <label for="bulkMessageTarget">‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞:</label>
                <select id="bulkMessageTarget" class="form-control">
                    <option value="all">‡¶∏‡¶ï‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</option>
                    <option value="active">‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</option>
                    <option value="blocked">‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶¨‡ßç‡¶≤‡¶ï‡¶° ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</option>
                    <option value="vip">‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</option>
                    <option value="non-vip">‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶®‡¶®-‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</option>
                </select>
            </div>
            <div class="form-group">
                <label for="bulkMessage">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú:</label>
                <textarea id="bulkMessage" class="form-control" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
            </div>
            <button class="controls-btn" id="sendBulkMessageBtn" style="background:#9c27b0; color:white; width:100%;">
                <i class="fas fa-paper-plane"></i> ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
            </button>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
// Firebase ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
const firebaseConfig = {
    apiKey: "AIzaSyCCGGU1Tvy3HMd0bCi8X3R7Gda5ZtSCcXE",
    authDomain: "user-panel-e7fb6.firebaseapp.com",
    databaseURL: "https://user-panel-e7fb6-default-rtdb.firebaseio.com",
    projectId: "user-panel-e7fb6",
    storageBucket: "user-panel-e7fb6.firebasestorage.app",
    messagingSenderId: "106974609939",
    appId: "1:106974609939:web:32542001892c4242c6f5e6",
    measurementId: "G-Y15T2HBY2J"
};

// Firebase ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
let allUsers = {};
let currentControlUserId = '';

// DOM ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
const usersGrid = document.getElementById("usersGrid");
const totalUsers = document.getElementById("totalUsers");
const activeUsers = document.getElementById("activeUsers");
const blockedUsers = document.getElementById("blockedUsers");
const vipUsers = document.getElementById("vipUsers");
const totalOrders = document.getElementById("totalOrders");
const todayOrders = document.getElementById("todayOrders");
const controlRoom = document.getElementById("controlRoom");
const closeControlRoom = document.getElementById("closeControlRoom");
const controlUserId = document.getElementById("controlUserId");
const alertContainer = document.getElementById("alertContainer");
const searchBox = document.getElementById("searchBox");
const bulkMessageModal = document.getElementById("bulkMessageModal");
const closeBulkMessageModal = document.getElementById("closeBulkMessageModal");

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶á‡¶®‡¶´‡ßã ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
const infoUserId = document.getElementById("infoUserId");
const infoTotalOrders = document.getElementById("infoTotalOrders");
const infoCurrentOrders = document.getElementById("infoCurrentOrders");
const infoVipUsage = document.getElementById("infoVipUsage");
const orderProgressBar = document.getElementById("orderProgressBar");
const vipProgressBar = document.getElementById("vipProgressBar");

// ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ
document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', function() {
        // ‡¶∏‡¶¨ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶•‡ßá‡¶ï‡ßá active ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶∞‡¶æ‡¶®
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        // ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá active ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
        this.classList.add('active');
        const tabId = this.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
    });
});

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
function loadUsers() {
    const usersRef = database.ref('users');
    
    usersRef.on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            allUsers = data;
            displayUsers(data);
            updateStats(data);
            updateDashboard(data);
        } else {
            usersGrid.innerHTML = '<div class="loader">‚ùå ‡¶ï‡ßã‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</div>';
        }
    });
}

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡ßÅ‡¶®
function displayUsers(users) {
    usersGrid.innerHTML = '';
    
    const searchTerm = searchBox.value.toLowerCase();
    
    Object.keys(users).forEach(userId => {
        const user = users[userId];
        
        // ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
        if (searchTerm && !userId.includes(searchTerm)) {
            return;
        }
        
        const userCard = document.createElement('div');
        userCard.className = 'user-card';
        
        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
        let statusClass = 'status-active';
        let statusText = '‚úÖ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠';
        
        if (user.isBlocked) {
            statusClass = 'status-blocked';
            statusText = '‚ùå ‡¶¨‡ßç‡¶≤‡¶ï‡¶°';
        } else if (user.timeBlockedUntil) {
            const blockedUntil = new Date(user.timeBlockedUntil);
            const now = new Date();
            if (blockedUntil > now) {
                statusClass = 'status-time-blocked';
                statusText = '‚è∞ ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï‡¶°';
            } else if (user.isVip) {
                statusClass = 'status-vip';
                statusText = '‚≠ê ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø';
            }
        } else if (user.isVip) {
            statusClass = 'status-vip';
            statusText = '‚≠ê ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø';
        }
        
        userCard.innerHTML = `
            <div class="user-id">
                <span>üÜî ${userId}</span>
                <button class="controls-btn" data-userid="${userId}">
                    <i class="fas fa-cog"></i> ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤
                </button>
            </div>
            <div class="user-stats">
                <div class="stat">
                    ‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ <div class="stat-value">${user.totalOrders || 0}</div>
                </div>
                <div class="stat">
                    ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ <div class="stat-value">${user.currentOrders || 0}/5</div>
                </div>
            </div>
            <div class="user-status ${statusClass}">
                ${statusText}
            </div>
        `;
        
        usersGrid.appendChild(userCard);
    });
    
    // ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
    document.querySelectorAll('.controls-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const userId = this.getAttribute('data-userid');
            openControlRoom(userId);
        });
    });
}

// ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateStats(users) {
    const userList = Object.values(users);
    totalUsers.textContent = userList.length;
    activeUsers.textContent = userList.filter(user => !user.isBlocked && (!user.timeBlockedUntil || new Date(user.timeBlockedUntil) <= new Date())).length;
    blockedUsers.textContent = userList.filter(user => user.isBlocked || (user.timeBlockedUntil && new Date(user.timeBlockedUntil) > new Date())).length;
    vipUsers.textContent = userList.filter(user => user.isVip).length;
}

// ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateDashboard(users) {
    const userList = Object.values(users);
    const totalOrdersCount = userList.reduce((sum, user) => sum + (user.totalOrders || 0), 0);
    const today = new Date().toDateString();
    const todayOrdersCount = userList.reduce((sum, user) => {
        if (user.lastOrderTime && new Date(user.lastOrderTime).toDateString() === today) {
            return sum + 1;
        }
        return sum;
    }, 0);
    
    totalOrders.textContent = totalOrdersCount;
    todayOrders.textContent = todayOrdersCount;
}

// ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∞‡ßÅ‡¶Æ ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®
function openControlRoom(userId) {
    currentControlUserId = userId;
    controlUserId.textContent = userId;
    
    const user = allUsers[userId];
    
    // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶á‡¶®‡¶´‡ßã ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    updateUserInfo(user);
    
    // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶´‡¶∞‡ßç‡¶Æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
    document.getElementById('cooldownTime').value = user.cooldownTime || 10;
    document.getElementById('likesAmount').value = user.customAmounts?.likes || 100;
    document.getElementById('viewsAmount').value = user.customAmounts?.views || 500;
    document.getElementById('followersAmount').value = user.customAmounts?.followers || 50;
    document.getElementById('commentsAmount').value = user.customAmounts?.comments || 50;
    document.getElementById('sharesAmount').value = user.customAmounts?.shares || 50;
    document.getElementById('vipServiceLimit').value = user.vipServiceLimit || 2;
    document.getElementById('adminMessage').value = '';
    
    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
    setupServiceControls(user);
    
    // ‡¶¨‡ßç‡¶≤‡¶ï/‡¶Ü‡¶®‡¶¨‡ßç‡¶≤‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏
    document.getElementById('blockUserBtn').style.display = user.isBlocked ? 'none' : 'flex';
    document.getElementById('unblockUserBtn').style.display = user.isBlocked ? 'flex' : 'none';
    
    // ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏
    document.getElementById('makeVipBtn').style.display = user.isVip ? 'none' : 'flex';
    document.getElementById('removeVipBtn').style.display = user.isVip ? 'flex' : 'none';
    
    // ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏
    const isTimeBlocked = user.timeBlockedUntil && new Date(user.timeBlockedUntil) > new Date();
    document.getElementById('timeBlockBtn').style.display = isTimeBlocked ? 'none' : 'flex';
    document.getElementById('removeTimeBlockBtn').style.display = isTimeBlocked ? 'flex' : 'none';
    
    controlRoom.style.display = 'flex';
}

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶á‡¶®‡¶´‡ßã ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateUserInfo(user) {
    infoUserId.textContent = user.id;
    infoTotalOrders.textContent = user.totalOrders || 0;
    infoCurrentOrders.textContent = `${user.currentOrders || 0}/5`;
    
    // ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶¨‡¶æ‡¶∞
    const orderProgress = ((user.currentOrders || 0) / 5) * 100;
    orderProgressBar.style.width = `${orderProgress}%`;
    
    // ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶á‡¶®‡¶´‡ßã
    const vipUsed = user.vipServiceUsed || 0;
    const vipLimit = user.vipServiceLimit || 2;
    infoVipUsage.textContent = `${vipUsed}/${vipLimit}`;
    
    // ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶¨‡¶æ‡¶∞
    const vipProgress = vipLimit > 0 ? (vipUsed / vipLimit) * 100 : 0;
    vipProgressBar.style.width = `${vipProgress}%`;
}

// ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®
function setupServiceControls(user) {
    const serviceControls = document.getElementById('serviceControls');
    serviceControls.innerHTML = '';
    
    const services = [
        { id: 'likes', name: '‡¶≤‡¶æ‡¶á‡¶ï', emoji: 'üëç' },
        { id: 'views', name: '‡¶≠‡¶ø‡¶â', emoji: 'üëÄ' },
        { id: 'followers', name: '‡¶´‡¶≤‡ßã‡¶Ø‡¶º‡¶æ‡¶∞', emoji: 'üë•' },
        { id: 'comments', name: '‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü', emoji: 'üí¨' },
        { id: 'shares', name: '‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞', emoji: 'üîÑ' }
    ];
    
    services.forEach(service => {
        const isEnabled = user.services?.[service.id] !== false;
        
        const serviceItem = document.createElement('div');
        serviceItem.className = 'service-item';
        serviceItem.innerHTML = `
            <input type="checkbox" id="service-${service.id}" ${isEnabled ? 'checked' : ''}>
            <label for="service-${service.id}">${service.emoji} ${service.name}</label>
        `;
        
        serviceControls.appendChild(serviceItem);
    });
}

// ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
function showAlert(message, type) {
    const alert = document.createElement('div');
    alert.className = `alert alert-${type}`;
    alert.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'}"></i> ${message}`;
    
    alertContainer.appendChild(alert);
    
    // 5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü ‡¶∏‡¶∞‡¶æ‡¶®
    setTimeout(() => {
        alert.remove();
    }, 5000);
}

// ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
closeControlRoom.addEventListener('click', () => {
    controlRoom.style.display = 'none';
});

closeBulkMessageModal.addEventListener('click', () => {
    bulkMessageModal.style.display = 'none';
});

// ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø
searchBox.addEventListener('input', () => {
    displayUsers(allUsers);
});

// ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®
document.getElementById('bulkMessageBtn').addEventListener('click', () => {
    bulkMessageModal.style.display = 'flex';
});

// ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
document.getElementById('sendBulkMessageBtn').addEventListener('click', () => {
    const message = document.getElementById('bulkMessage').value.trim();
    const target = document.getElementById('bulkMessageTarget').value;
    
    if (!message) {
        showAlert('‚ùå ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®', 'error');
        return;
    }
    
    let count = 0;
    Object.keys(allUsers).forEach(userId => {
        const user = allUsers[userId];
        
        let shouldSend = false;
        if (target === 'all') shouldSend = true;
        else if (target === 'active') shouldSend = !user.isBlocked && (!user.timeBlockedUntil || new Date(user.timeBlockedUntil) <= new Date());
        else if (target === 'blocked') shouldSend = user.isBlocked || (user.timeBlockedUntil && new Date(user.timeBlockedUntil) > new Date());
        else if (target === 'vip') shouldSend = user.isVip;
        else if (target === 'non-vip') shouldSend = !user.isVip;
        
        if (shouldSend) {
            database.ref('users/' + userId).update({
                adminMessage: message
            });
            count++;
        }
    });
    
    showAlert(`üì® ${count} ‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    document.getElementById('bulkMessage').value = '';
    bulkMessageModal.style.display = 'none';
});

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('blockUserBtn').addEventListener('click', () => {
    database.ref('users/' + currentControlUserId).update({
        isBlocked: true,
        timeBlockedUntil: null
    });
    showAlert(`‚úÖ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    controlRoom.style.display = 'none';
});

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶®‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('unblockUserBtn').addEventListener('click', () => {
    database.ref('users/' + currentControlUserId).update({
        isBlocked: false,
        timeBlockedUntil: null
    });
    showAlert(`‚úÖ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶Ü‡¶®‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    controlRoom.style.display = 'none';
});

// ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡¶æ‡¶®‡¶æ‡¶®
document.getElementById('makeVipBtn').addEventListener('click', () => {
    database.ref('users/' + currentControlUserId).update({
        isVip: true
    });
    showAlert(`‚≠ê ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡¶æ‡¶®‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    controlRoom.style.display = 'none';
});

// ‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶¨‡¶æ‡¶®‡¶æ‡¶®
document.getElementById('removeVipBtn').addEventListener('click', () => {
    database.ref('users/' + currentControlUserId).update({
        isVip: false
    });
    showAlert(`üë§ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶¨‡¶æ‡¶®‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    controlRoom.style.display = 'none';
});

// ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('timeBlockBtn').addEventListener('click', () => {
    const minutes = parseInt(document.getElementById('timeBlockDuration').value);
    const blockedUntil = new Date(Date.now() + minutes * 60000).toISOString();
    
    database.ref('users/' + currentControlUserId).update({
        timeBlockedUntil: blockedUntil,
        isBlocked: false
    });
    
    showAlert(`‚è∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶ï‡ßá ${minutes} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    controlRoom.style.display = 'none';
});

// ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®
document.getElementById('removeTimeBlockBtn').addEventListener('click', () => {
    database.ref('users/' + currentControlUserId).update({
        timeBlockedUntil: null
    });
    
    showAlert(`‚úÖ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶è‡¶∞ ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    controlRoom.style.display = 'none';
});

// ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('vipServiceLimit').addEventListener('change', function() {
    const limit = parseInt(this.value);
    if (limit >= 0) {
        database.ref('users/' + currentControlUserId).update({
            vipServiceLimit: limit
        });
        showAlert(`‚≠ê ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶è‡¶∞ ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ${limit} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    }
});

// ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('resetVipUsageBtn').addEventListener('click', () => {
    database.ref('users/' + currentControlUserId).update({
        vipServiceUsed: 0
    });
    
    showAlert(`üîÑ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶è‡¶∞ ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
});

// ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
document.getElementById('sendMessageBtn').addEventListener('click', () => {
    const message = document.getElementById('adminMessage').value.trim();
    
    if (!message) {
        showAlert('‚ùå ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®', 'error');
        return;
    }
    
    database.ref('users/' + currentControlUserId).update({
        adminMessage: message
    });
    
    showAlert(`üì® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶ï‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    document.getElementById('adminMessage').value = '';
});

// ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('updateCooldownBtn').addEventListener('click', () => {
    const cooldownTime = parseInt(document.getElementById('cooldownTime').value);
    
    if (cooldownTime < 1 || cooldownTime > 60) {
        showAlert('‚ùå ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶∏‡¶Æ‡¶Ø‡¶º 1-60 ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
        return;
    }
    
    database.ref('users/' + currentControlUserId).update({
        cooldownTime: cooldownTime
    });
    
    showAlert(`‚è∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶è‡¶∞ ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ${cooldownTime} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
});

// ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('updateAmountsBtn').addEventListener('click', () => {
    const likesAmount = parseInt(document.getElementById('likesAmount').value);
    const viewsAmount = parseInt(document.getElementById('viewsAmount').value);
    const followersAmount = parseInt(document.getElementById('followersAmount').value);
    const commentsAmount = parseInt(document.getElementById('commentsAmount').value);
    const sharesAmount = parseInt(document.getElementById('sharesAmount').value);
    
    if (likesAmount < 1 || likesAmount > 1000) {
        showAlert('‚ùå ‡¶≤‡¶æ‡¶á‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 1-1000 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
        return;
    }
    
    if (viewsAmount < 1 || viewsAmount > 5000) {
        showAlert('‚ùå ‡¶≠‡¶ø‡¶â ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 1-5000 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
        return;
    }
    
    if (followersAmount < 1 || followersAmount > 100) {
        showAlert('‚ùå ‡¶´‡¶≤‡ßã‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 1-100 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
        return;
    }
    
    if (commentsAmount < 10 || commentsAmount > 100) {
        showAlert('‚ùå ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 10-100 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
        return;
    }
    
    if (sharesAmount < 1 || sharesAmount > 100) {
        showAlert('‚ùå ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 1-100 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
        return;
    }
    
    database.ref('users/' + currentControlUserId + '/customAmounts').update({
        likes: likesAmount,
        views: viewsAmount,
        followers: followersAmount,
        comments: commentsAmount,
        shares: sharesAmount
    });
    
    showAlert(`üî¢ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${currentControlUserId} ‡¶è‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
});

// ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
controlRoom.addEventListener('click', (e) => {
    if (e.target.type === 'checkbox' && e.target.id.startsWith('service-')) {
        const serviceId = e.target.id.replace('service-', '');
        const isEnabled = e.target.checked;
        
        database.ref('users/' + currentControlUserId + '/services').update({
            [serviceId]: isEnabled
        });
        
        const serviceName = {
            likes: '‡¶≤‡¶æ‡¶á‡¶ï',
            views: '‡¶≠‡¶ø‡¶â',
            followers: '‡¶´‡¶≤‡ßã‡¶Ø‡¶º‡¶æ‡¶∞',
            comments: '‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü',
            shares: '‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞'
        }[serviceId];
        
        showAlert(`‚öôÔ∏è ${serviceName} ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ${isEnabled ? '‡¶ö‡¶æ‡¶≤‡ßÅ' : '‡¶¨‡¶®‡ßç‡¶ß'} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
    }
});

// ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('enableMaintenanceBtn').addEventListener('click', () => {
    database.ref('siteStatus/maintenance').update({
        enabled: true
    });
    
    showAlert('üîß ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
});

// ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶Æ‡ßã‡¶° ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('disableMaintenanceBtn').addEventListener('click', () => {
    database.ref('siteStatus/maintenance').update({
        enabled: false
    });
    
    showAlert('‚úÖ ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶Æ‡ßã‡¶° ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
});

// ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
document.getElementById('updateSystemSettingsBtn').addEventListener('click', () => {
    const systemCooldown = parseInt(document.getElementById('systemCooldown').value);
    
    if (systemCooldown < 1 || systemCooldown > 60) {
        showAlert('‚ùå ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶∏‡¶Æ‡¶Ø‡¶º 1-60 ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
        return;
    }
    
    // ‡¶∏‡¶ï‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    let count = 0;
    Object.keys(allUsers).forEach(userId => {
        database.ref('users/' + userId).update({
            cooldownTime: systemCooldown
        });
        count++;
    });
    
    showAlert(`‚öôÔ∏è ${count} ‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
});

// ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™
document.getElementById('backupDataBtn').addEventListener('click', () => {
    const dataStr = JSON.stringify(allUsers, null, 2);
    const dataBlob = new Blob([dataStr], {type: 'application/json'});
    
    const url = URL.createObjectURL(dataBlob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `mr_tools_backup_${new Date().toISOString().split('T')[0]}.json`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
    
    showAlert('üíæ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
});

// ‡¶°‡¶æ‡¶ü‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü
document.getElementById('exportDataBtn').addEventListener('click', () => {
    const csvData = [];
    
    // ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
    csvData.push(['User ID', 'Total Orders', 'Current Orders', 'VIP', 'Blocked', 'Last Order'].join(','));
    
    // ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
    Object.keys(allUsers).forEach(userId => {
        const user = allUsers[userId];
        csvData.push([
            userId,
            user.totalOrders || 0,
            user.currentOrders || 0,
            user.isVip ? 'Yes' : 'No',
            user.isBlocked ? 'Yes' : 'No',
            user.lastOrderTime || 'N/A'
        ].join(','));
    });
    
    const csvStr = csvData.join('\n');
    const dataBlob = new Blob([csvStr], {type: 'text/csv'});
    
    const url = URL.createObjectURL(dataBlob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `mr_tools_users_${new Date().toISOString().split('T')[0]}.csv`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
    
    showAlert('üìä ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ CSV ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
});

// ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®
loadUsers();
</script>
</body>
  </html>
